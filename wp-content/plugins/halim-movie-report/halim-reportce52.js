jQuery(document).ready(function($){var clickedButton;var currentForm;$('.halim-submit').prop("disabled",false);$('.halim-switch').click(function(){jQuery('body').append('<div class="modal fade" id="ajax-reportModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title text-success"><i class="hl-attention"></i> '+halimReport.report_btn+'</h4></div><div class="modal-body" style="overflow:hidden;"><div class="halim-content col-xs-12"><div class="halim-message"></div><div class="halim-form"><div class="col-xs-12"><div class="form-group"><label for="input-name">Name *</label><div class="col-md-12"><input type="text" class="form-control input-name" id="input-name"></div></div><div class="form-group"><label for="input-content"><br/>Your message*</label><div class="col-md-12"><textarea rows="5" class="form-control input-content col-md-12" id="input-content"></textarea></div></div></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button><button type="button" class="btn btn-danger pull-right halim-submit"><span class="glyphicon glyphicon-ok"></span> '+halimReport.report_btn+'</button><img class="loading-img" style="display:none;" src="'+halimReport.loading_img+'"></div></div><!-- /.modal-content --></div><!-- /.modal-dialog --></div><!-- /.modal -->');jQuery('#ajax-reportModal').modal('show');});$('body').on('click','.halim-submit',function(){clickedButton=$(this);currentForm=$('.halim-content');var _content=currentForm.find('.input-content').val();var _name=currentForm.find('.input-name').val();if(_name==''||_content==''){currentForm.find('.halim-message').html('<div class="alert alert-danger" role="alert">'+halimReport.alert+'</div>');return false;}
clickedButton.prop("disabled",true);currentForm.find('.loading-img').show();$.ajax({type:'POST',url:ajax_player.url,data:{action:'halim_report',id_post:halim_cfg.post_id,server:halim_cfg.server,episode:halim_cfg.episode,post_name:$('h1.entry-title').text()+' server '+halim_cfg.server,halim_error_url:encodeURI(window.location)+'#by_user',content:_content,name:_name},success:function(data){currentForm.find('.halim-message').html('<div class="alert alert-success" role="alert">'+halimReport.msg+'</div>');currentForm.find('.halim-form, .loading-img').hide();},error:function(e){alert('Error!');}});});});